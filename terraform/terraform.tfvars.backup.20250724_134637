# terraform.tfvars.example
# このファイルをコピーしてterraform.tfvarsとして使用してください
# terraform.tfvarsは.gitignoreに追加することを推奨します

# =============================================================================
# 🚀 簡単セットアップ（推奨）
# =============================================================================
# 自動設定を使用する場合は以下のコマンドを実行:
#   make setup-tfvars
# このコマンドがバックエンドから必要な値を自動取得して設定します

# =============================================================================
# 必須設定項目 - 以下の値は必ず設定が必要です
# =============================================================================

# バックエンドAPI URL（フロントエンドがバックエンドと通信するためのURL）
# 📝 自動取得: make setup-tfvars
# 📝 手動取得: cd ../mutual_backend/terraform && terraform output -raw api_endpoint_alb
# 📝 CloudFront使用時: cd ../mutual_backend/terraform && terraform output -raw cloudfront_domain_name
api_base_url = "https://doxlbf2dw75re.cloudfront.net"  # 自動設定で置換されます

# VPC ID（バックエンドと同じVPCを使用）
# 📝 自動取得: make setup-tfvars  
# 📝 手動取得: cd ../mutual_backend/terraform && terraform output -raw vpc_id
# 📝 複数VPC環境: aws ec2 describe-vpcs --filters "Name=tag:Name,Values=mutual-app-vpc" --query 'Vpcs[0].VpcId' --output text
vpc_id = "vpc-0ede4833285bdeb8c"  # 自動設定で置換されます

# =============================================================================
# オプション設定項目（必要に応じて変更）
# =============================================================================

# ドメイン設定
# domain_name = "example.com"  # 独自ドメインがある場合は設定
domain_name = ""  # 空文字の場合はCloudFrontの自動ドメインを使用（無料）

# 基本設定
region = "ap-northeast-1"
project_name = "mutual-app"  # バックエンドと統一してください
environment = "production"

# Auth0設定（開発環境用デフォルト値）
auth0_issuer_base_url = "https://dev-ldw81lf4gyh8azw6.jp.auth0.com/"
auth0_domain = "dev-ldw81lf4gyh8azw6.jp.auth0.com"
auth0_client_id = "Y5p4Fn2rllKLs4M2zoIShqIhn4JdKZzP"
auth0_audience = "https://api.local.dev"

# ECS設定
use_existing_ecs_cluster = true      # バックエンドと共有する場合はtrue
existing_ecs_cluster_name = "mutual-app-cluster"  # バックエンドのクラスター名

# =============================================================================
# セキュリティ設定（オプション）
# =============================================================================

# IPアドレス制限（CIDR形式）
# allowed_ip_addresses = ["203.0.113.0/24", "198.51.100.0/24"]
allowed_ip_addresses = []  # 空の場合は全IPを許可

# 地理的制限
enable_waf_geo_restriction = false
waf_blocked_countries = ["CN", "RU", "KP"]  # ブロックする国コード

# =============================================================================
# 📋 セットアップ手順
# =============================================================================
# 1. このファイルをterraform.tfvarsにコピー:
#    cp terraform.tfvars.example terraform.tfvars
#
# 2. 自動設定を実行（推奨）:
#    make setup-tfvars
#
# 3. または手動で必須項目を設定:
#    - api_base_url: バックエンドのURL
#    - vpc_id: バックエンドと同じVPC ID
#
# 4. インフラをデプロイ:
#    make tf-apply
#
# 5. アプリケーションをビルド・デプロイ:
#    make deploy
#
# =============================================================================
# 📞 トラブルシューティング
# =============================================================================
# ❌ "api_base_url must be specified" エラー:
#    → make setup-tfvars を実行するか、手動でapi_base_urlを設定
#
# ❌ "Multiple VPCs found" エラー:  
#    → vpc_idを明示的に設定してください
#
# ❌ WAF重複エラー:
#    → リソース名は自動的にランダムIDが付与されるため解決済み
#
# ❌ 権限エラー:
#    → AWS_PROFILE=admin を使用していることを確認 